# watttime-go
Go library for the [Watttime API](https://www.watttime.org/api-documentation/#introduction)

## Installing

```shell
go get github.com/IuryAlves/watttime-go
```

<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# pkg

```go
import "github.com/IuryAlves/watttime-go/pkg"
```

## Index

- [Constants](<#constants>)
- [type IndexOptions](<#type-indexoptions>)
- [type RealTimeEmissionsIndex](<#type-realtimeemissionsindex>)
- [type Token](<#type-token>)
- [type WattTime](<#type-watttime>)
  - [func New() *WattTime](<#func-new>)
  - [func (w WattTime) Index(token string, options IndexOptions) (RealTimeEmissionsIndex, error)](<#func-watttime-index>)
  - [func (w WattTime) Login(username, password string) (string, error)](<#func-watttime-login>)
  - [func (w WattTime) Register(username, password, email, org string) (bool, error)](<#func-watttime-register>)


## Constants

```go
const (
    BaseEndpoint     = "https://api2.watttime.org"
    LoginEndpoint    = BaseEndpoint + "/login"
    IndexEndpoint    = BaseEndpoint + "/index"
    RegisterEndpoint = BaseEndpoint + "/register"
)
```

## type [IndexOptions](<https://github.com/IuryAlves/watttime-go/blob/main/pkg/types.go#L23-L31>)

```go
type IndexOptions struct {
    // Options for the Index function.
    // Provided either Ba or Latitude and Longitude, but not all three.
    Ba        string
    Latitude  float64
    Longitude float64
    // Units in which to provide realtime marginal emissions.
    Style string
}
```

## type [RealTimeEmissionsIndex](<https://github.com/IuryAlves/watttime-go/blob/main/pkg/types.go#L8-L21>)

```go
type RealTimeEmissionsIndex struct {
    // Duration in seconds for which the data is valid from point_time
    Freq string
    //	Balancing authority abbreviation
    Ba  string
    // A percentile value between 0 (minimum MOER in the last month i.e. clean) and 100
    // (maximum MOER in the last month i.e. dirty) representing the relative realtime
    // marginal emissions intensity.
    Percent string
    // Marginal Operating Emissions Rate (MOER) value measured in lbs/MWh
    Moer string
    // ISO8601 UTC date/time format indicating when this data became valid
    PointTime string `json:"point_time"`
}
```

## type [Token](<https://github.com/IuryAlves/watttime-go/blob/main/pkg/types.go#L3-L6>)

```go
type Token struct {
    // A token for authentication towards the WattTime API
    Value string `json:"token"`
}
```

## type [WattTime](<https://github.com/IuryAlves/watttime-go/blob/main/pkg/watttime.go#L21-L23>)

```go
type WattTime struct {
    Client internal.HTTPClient
}
```

### func [New](<https://github.com/IuryAlves/watttime-go/blob/main/pkg/watttime.go#L26>)

```go
func New() *WattTime
```

New Instantiates a WattTime Client

### func \(WattTime\) [Index](<https://github.com/IuryAlves/watttime-go/blob/main/pkg/watttime.go#L91>)

```go
func (w WattTime) Index(token string, options IndexOptions) (RealTimeEmissionsIndex, error)
```

Index Provides a real\-time signal indicating the marginal carbon intensity for the local grid for the current time \(updated every 5 minutes\)\.

<details><summary>Example (With Ba)</summary>
<p>

```go
{
	wattTime := New()
	options := IndexOptions{Ba: "SE"}
	realTimeEmissionsIndex, err := wattTime.Index("123abc", options)
	if err != nil {
		fmt.Println(err.Error())
	}
	fmt.Println("Marginal Operating Emissions Rate (MOER)", realTimeEmissionsIndex.Moer)
}
```

</p>
</details>

<details><summary>Example (With Latitude Longitude)</summary>
<p>

```go
{
	wattTime := New()
	options := IndexOptions{Latitude: 42.372, Longitude: -72.519}
	realTimeEmissionsIndex, err := wattTime.Index("123abc", options)
	if err != nil {
		fmt.Println(err.Error())
	}
	fmt.Println("Marginal Operating Emissions Rate (MOER)", realTimeEmissionsIndex.Moer)
}
```

</p>
</details>

<details><summary>Example (With Style)</summary>
<p>

```go
{
	wattTime := New()
	options := IndexOptions{Ba: "SE", Style: "Percent"}
	realTimeEmissionsIndex, err := wattTime.Index("123abc", options)
	if err != nil {
		fmt.Println(err.Error())
	}
	fmt.Println("Marginal Operating Emissions Rate (MOER)", realTimeEmissionsIndex.Percent)
}
```

</p>
</details>

### func \(WattTime\) [Login](<https://github.com/IuryAlves/watttime-go/blob/main/pkg/watttime.go#L33>)

```go
func (w WattTime) Login(username, password string) (string, error)
```

#### Login Authenticates towards the WattTime API

Login returns a token of type string\. Use the token for further requests towards the API

<details><summary>Example</summary>
<p>

```go
{
	wattTime := New()
	token, err := wattTime.Login("<username>", "<password>")
	if err != nil {
		fmt.Println(err.Error())
	}
	fmt.Println(token)
}
```

</p>
</details>

### func \(WattTime\) [Register](<https://github.com/IuryAlves/watttime-go/blob/main/pkg/watttime.go#L56>)

```go
func (w WattTime) Register(username, password, email, org string) (bool, error)
```

#### Register creates a new user for the WattTime API

Returns \(true\, nil\) if the registration was successful and \(false\, err\) otherwise

<details><summary>Example</summary>
<p>

```go
{
	wattTime := New()
	ok, err := wattTime.Register(
		"john",
		"snow",
		"john@snow.com",
		"nightwatchers",
	)

	if err != nil {
		fmt.Println(err.Error())
	}

	if ok {
		fmt.Println("User registered")
	}
}
```

</p>
</details>



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->